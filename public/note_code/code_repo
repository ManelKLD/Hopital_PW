if ($FormData['Nom'] == null and $FormData['Pays'] == null and $FormData['Motif'] == null and $FormData['Date'] == null) {

return $r

//requete sur le nom
->orWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->orWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->orWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])


//requete sur la date
->orWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

//->select('patient', 'p', 'm')
//jointure
//->join('patient.codePays', 'p') --------erreur ?
//->join('patient.codeMotif', 'm')

->getQuery()
->getResult();
}

//si que le nom est vide
else if ($FormData['Nom'] == null) {
return $r

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->andWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])

//requete sur la date
->andWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

->getQuery()
->getResult();
}
//si que le Pays est vide
else if ($FormData['Pays'] == null) {
return $r

//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le motif
->andWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])


//requete sur la date
->andWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

->getQuery()
->getResult();
}
//si que la Date est vide
else if ($FormData['Date'] == null) {
return $r

//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->andWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])

->getQuery()
->getResult();
}
//si que le motif est vide
else if ($FormData['Motif'] == null) {
return $r

//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur la date
->andWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

->getQuery()
->getResult();
}

//si tout vide sauf le nom

else if ($FormData['Nom'] != null and $FormData['Pays'] == 'IndiffÃ©rent' and $FormData['Motif'] == null and $FormData['Date'] == null) {

return $r

//requete sur le nom
->Where('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->orWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->orWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])


//requete sur la date
->orWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

->getQuery()
->getResult();
}

//si tout les champs ne sont pas vide
else if ($FormData['Nom'] != null and $FormData['Pays'] != null and $FormData['Motif'] != null and $FormData['Date'] != null) {

return $r

//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->andWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])

//requete sur la date
->andWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])

->getQuery()
->getResult();
}
//si motif et date null
else if ($FormData['Nom'] != null and $FormData['Pays'] != null and $FormData['Motif'] == null and $FormData['Date'] == null) {

return $r
//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])


->getQuery()
->getResult();
} else if ($FormData['Nom'] != null and $FormData['Pays'] != null and $FormData['Motif'] != null and $FormData['Date'] == null) {

return $r
//requete sur le nom
->andWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le motif
->andWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])

->getQuery()
->getResult();
} else if ($FormData['Nom'] == null and $FormData['Pays'] != null and $FormData['Motif'] == null and $FormData['Date'] == null) {
return $r
//requete sur le pays
->andWhere('patient.codePays = :codePays') //nom de la table
->setParameter('codePays', $FormData['Pays'])

//requete sur le nom
->orWhere('patient.nom LIKE :nom') //nom de la table
->setParameter('nom', '%' . $FormData['Nom'] . '%') //'Nom' provient de forulaire, FormData contient les infos saisie dans le formulaire
->orderBy('patient.nom' /*and 'p.prenom'*/, 'ASC')

//requete sur le motif
->orWhere('patient.codeMotif = :codeMotif') //nom de la table
->setParameter('codeMotif', $FormData['Motif'])

//requete sur la date
->orWhere('patient.dateNaiss = :date') //nom de la table
->setParameter('date', $FormData['Date'])
->getQuery()
->getResult();
}